{% extends 'base.html.twig' %}

{% block title %}
	{{parent()}}
	- Panier
{% endblock %}

{% block body %}
	<div class="cart container mb-5">
		<div class="d-flex gap-3 align-items-center">
			<h2 class="m-0">MON PANIER</h2>
			<p class="m-0">{{productTotal}}
				articles</p>
		</div>
		<div>
			<p>Livraison OFFERTE* | Retours sous 30 jours</p>
		</div>
		<div class="row">
			<div class="col-12 col-md-6 d-flex flex-column gap-3">
				{% for element in dataCart %}
					<div class=" container-cart d-flex gap-3">
						<div class="w-25 d-flex align-items-center justify-content-center">
							<img class="w-75" src="{{'img/' ~ ((element.product.imgUrl | split(',')[0]) | split('-')[0] ~ '-' ~ element.color ~ '.png')}}" alt="">
						</div>
						<div>

							<h3 class="mt-2">{{ element.product.brand }}
								-
								{{element.product.model}}</h3>

							<p>{{ (element.product.priceHT * 1.2) | format_currency('EUR')}}
							</p>
							<p>
								<a class="btn btn-light" href="{{path('cart.remove', {id: element.product.id, color: element.color})}}">-</a>
								{{element.quantity}}
								<a class="btn btn-light" href="{{path('cart.add', {id: element.product.id, color: element.color})}}">+</a>
							</p>

							<a href="{{path('cart.delete', {id: element.product.id, color: element.color})}}" class="btn btn-danger mb-2">
								<i class="fa-solid fa-trash"></i>
							</a>


						</div>

					</div>

				{% else %}
					<tr>
						<td colspan="5" class"text-center">Votre panier est vide</td>
					</tr>
				{% endfor %}

				<div class="bonus">
					<p class="m-0">Bonus : Emballage cadeau avec checkbox</p>
				</div>
			</div>
			<div class="col-12 col-md-6 order-recap">
				<div class="ms-5 me-5 mt-3">
					<h2>RÃ©capitulatif de la commande</h2>

					<form action="">
						<label for="reduce">Code promo</label>
						<input id="reduce" type="text" class="mb-2" name="reduce">
						<button class="btn btn-outline-primary mb-2">valider</button>
					</form>

					<p>Sous total HT :
						{{ (total / 1.2) | format_currency('EUR')}}</p>
					<p>Frais de livraison : Offert</p>
					<p>TVA : 20%</p>
					<h2>TOTAL TTC :
						{{ total | format_currency('EUR')}}
					</h2>
					<button class="btn btn-lg btn-primary">VALIDER MON PANIER</button>
				</div>
			</div>
		</div>
	</div>
	<pre>
	</pre>
{% endblock %}
