{% extends "base.html.twig" %}


{% block title %}
	{{parent()}}
	-
	{{order.id}}
{% endblock %}

{% block body %}
	<div class="container-lg">
		<h2 class="fs-4 my-4">Mon compte</h2>
		<div class="d-flex gap-5">
			<section class="my-5 account" style="width: 18rem;">
				<ul class="list-group list-group-flush">
					<li class="list-group-item py-3 bg-color">
						<h2 class="fs-4 fw-bold">Bonjour
							{{ user.firstname }}</h2>
					</li>
					<li class="list-group-item py-3 bg-color">
						<a href="#">
							<div class="d-flex justify-content-between align-items-center">
								<i class="fa-solid fa-memo-circle-info fs-4" style="color: #000000;"></i>
								<span>Informations</span>
								<i class="fa-solid fa-chevron-right" style="color: #000000;"></i>
							</div>
						</a>
					</li>
					<li class="list-group-item py-3 bg-color">
						<a href="{{ path('app_reset_password') }}">
							<div class="d-flex justify-content-between align-items-center">
								<i class="fa-solid fa-lock fs-4" style="color: #000000;"></i>
								<span>Mot de passe</span>
								<i class="fa-solid fa-chevron-right" style="color: #000000;"></i>
							</div>
						</a>
					</li>
					<li class="list-group-item py-3 bg-color-active">
						<a href="{{path('order.index', {id: app.user.id})}}">
							<div class="d-flex justify-content-between align-items-center">
								<i class="fa-solid fa-bags-shopping fs-4" style="color: #000000;"></i>
								<span>Mes commandes</span>
								<i class="fa-solid fa-chevron-right" style="color: #000000;"></i>
							</div>
						</a>
					</li>
					<li class="list-group-item py-3 bg-color">
						<a href="{{ path('app_logout') }}">
							<div class="d-flex">
								<i class="fa-solid fa-right-from-bracket fs-4" style="color: #000000;"></i>
								<span class="ms-4 ps-4">Se déconnecter</span>
							</div>
						</a>
					</li>
				</ul>
			</section>
			<section class="my-5 w-100">
				<div class="card border border-3 rounded-2 my-3">

					<div class="card-body d-flex flex-column justify-content-between align-items-start h-100">
						<h4 class="card-title fw-bold">Commandes n°{{order.id}}</h4>
						<p class="card-text fw-bold">Total :
							{{order.total | format_currency('EUR')}}</p>
						<p class="card-text fw-bold statut" data-statut="{{order.status}}">
							{{order.status}}
						</p>

						<table class="table align-middle">
							<thead>
								<tr>
									<th scope="col">Image</th>
									<th scope="col">Marque</th>
									<th scope="col">Model</th>
									<th scope="col">quantité</th>
									<th scope="col">prix HT</th>
								</tr>
							</thead>
							<tbody>
								{% for item in orderItems %}
									<tr>
										<td><img style="width: 40px" src="{{asset('img/' ~ item.product.imgUrl | split(',')[0] )}}" alt=""></td>
										<td>{{item.product.brand}}</td>
										<td>{{item.product.model}}</td>
										<td>{{item.quantity}}</td>
										<td>{{item.product.priceHT}}</td>
									</tr>
								{% endfor %}
							</tbody>
						</table>


						<p class="card-text">
							<small class="text-body-secondary ">Commande effectuée le
								{{order.createdAt | date('d-m-Y à H:i')}}</small>
						</p>
					</div>
				</div>
			</section>
		</div>
	</div>
{% endblock %}
